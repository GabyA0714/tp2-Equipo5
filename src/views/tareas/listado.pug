extends layout

block content
  h1 Lista de Tareas
  a(href="/tareas/nueva") Nueva tarea
  br
  br

  if error
    p(style="color:red")= error
  
  form(action="/tareas", method="get")
    div
      label(for="area") Área:
      select(name="area")
        option(value="") Todas
        each a in areas
          option(value=a selected=(filtros.area==a)?true:false)= a

    div
      label(for="empleadoId") Empleado:
      select(name="empleadoId")
        option(value="") Todos
        each e in empleados
          option(value=e.id selected=(filtros.empleadoId==e.id)?true:false)= e.nombre + " " + e.apellido

    div
      label(for="pacienteId") Paciente:
      select(name="pacienteId")
        option(value="") Todos
        each p in pacientes
          option(value=p.id selected=(filtros.pacienteId==p.id)?true:false)= p.nombre + " " + p.apellido

    br
    button(type="submit") Filtrar

  br

  if tareas && tareas.length
    ul
      each t in tareas
        li
          strong= t.tipo
          |  – Estado: #{t.estado}, Prioridad: #{t.prioridad}, Área: #{t.area}
          a(href=`/tareas/editar/${t.id}`) Editar
          form(action=`/tareas/eliminar/${t.id}?_method=DELETE`, method="post")
            button(type="submit") Eliminar
  else
    p No hay tareas registradas.